!function(e,t){"function"==typeof define&&define.amd?define(function(){return t(e)}):t(e)}(this,function(f){$=(r=[]).concat,o=r.filter,h=r.slice,u=f.document,d={},t={},N={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},F=/^\s*<(\w+|!)[^>]*>/,z=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,q=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,R=/^(?:body|html)$/i,B=/([A-Z])/g,U=["val","css","html","text","data","width","height","offset"],e=u.createElement("table"),_=u.createElement("tr"),Z={tr:u.createElement("tbody"),tbody:e,thead:e,tfoot:e,td:_,th:_,"*":u.createElement("div")},V=/complete|loaded|interactive/,X=/^[\w-]*$/,W=(K={}).toString,p={},Y=u.createElement("div"),J={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},m=Array.isArray||function(e){return e instanceof Array},p.matches=function(e,t){var i,n;return!(!t||!e||1!==e.nodeType)&&((i=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector)?i.call(e,t):((n=!(i=e.parentNode))&&(i=Y).appendChild(e),i=~p.qsa(i,t).indexOf(e),n&&Y.removeChild(e),i))},s=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},i=function(i){return o.call(i,function(e,t){return i.indexOf(e)==t})},p.fragment=function(e,t,i){var n,r,o;return(n=z.test(e)?c(u.createElement(RegExp.$1)):n)||(e.replace&&(e=e.replace(q,"<$1></$2>")),t===l&&(t=F.test(e)&&RegExp.$1),(o=Z[t=t in Z?t:"*"]).innerHTML=""+e,n=c.each(h.call(o.childNodes),function(){o.removeChild(this)})),L(i)&&(r=c(n),c.each(i,function(e,t){-1<U.indexOf(e)?r[e](t):r.attr(e,t)})),n},p.Z=function(e,t){return new Se(e,t)},p.isZ=function(e){return e instanceof p.Z},p.init=function(e,t){var i,n;if(!e)return p.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&F.test(e))i=p.fragment(e,RegExp.$1,t),e=null;else{if(t!==l)return c(t).find(e);i=p.qsa(u,e)}else{if(T(e))return c(u).ready(e);if(p.isZ(e))return e;if(m(e))n=e,i=o.call(n,function(e){return null!=e});else if(E(e))i=[e],e=null;else if(F.test(e))i=p.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==l)return c(t).find(e);i=p.qsa(u,e)}}return p.Z(i,e)},(c=function(e,t){return p.init(e,t)}).extend=function(t){var i,e=h.call(arguments,1);return"boolean"==typeof t&&(i=t,t=e.shift()),e.forEach(function(e){!function e(t,i,n){for(a in i)n&&(L(i[a])||m(i[a]))?(L(i[a])&&!L(t[a])&&(t[a]={}),m(i[a])&&!m(t[a])&&(t[a]=[]),e(t[a],i[a],n)):i[a]!==l&&(t[a]=i[a])}(t,e,i)}),t},p.qsa=function(e,t){var i,n="#"==t[0],r=!n&&"."==t[0],o=n||r?t.slice(1):t,a=X.test(o);return e.getElementById&&a&&n?(i=e.getElementById(o))?[i]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:h.call(a&&!n&&e.getElementsByClassName?r?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},c.contains=u.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t=t&&t.parentNode;)if(t===e)return!0;return!1},c.type=S,c.isFunction=T,c.isWindow=we,c.isArray=m,c.isPlainObject=L,c.isEmptyObject=function(e){for(var t in e)return!1;return!0},c.isNumeric=function(e){var t=Number(e),i=typeof e;return null!=e&&"boolean"!=i&&("string"!=i||e.length)&&!isNaN(t)&&isFinite(t)||!1},c.inArray=function(e,t,i){return r.indexOf.call(t,e,i)},c.camelCase=s,c.trim=function(e){return null==e?"":String.prototype.trim.call(e)},c.uuid=0,c.support={},c.expr={},c.noop=function(){},c.map=function(e,t){var i,n,r,o,a=[];if(be(e))for(n=0;n<e.length;n++)null!=(i=t(e[n],n))&&a.push(i);else for(r in e)i=t(e[r],r),null!=i&&a.push(i);return 0<(o=a).length?c.fn.concat.apply([],o):o},c.each=function(e,t){var i,n;if(be(e)){for(i=0;i<e.length;i++)if(!1===t.call(e[i],i,e[i]))return e}else for(n in e)if(!1===t.call(e[n],n,e[n]))return e;return e},c.grep=function(e,t){return o.call(e,t)},f.JSON&&(c.parseJSON=JSON.parse),c.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){K["[object "+t+"]"]=t.toLowerCase()}),c.fn={constructor:p.Z,length:0,forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,splice:r.splice,indexOf:r.indexOf,concat:function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=p.isZ(e=arguments[i])?e.toArray():e;return $.apply(p.isZ(this)?this.toArray():this,t)},map:function(i){return c(c.map(this,function(e,t){return i.call(e,t,e)}))},slice:function(){return c(h.apply(this,arguments))},ready:function(e){return V.test(u.readyState)&&u.body?e(c):u.addEventListener("DOMContentLoaded",function(){e(c)},!1),this},get:function(e){return e===l?h.call(this):this[0<=e?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(i){return r.every.call(this,function(e,t){return!1!==i.call(e,t,e)}),this},filter:function(t){return T(t)?this.not(this.not(t)):c(o.call(this,function(e){return p.matches(e,t)}))},add:function(e,t){return c(i(this.concat(c(e,t))))},is:function(e){return 0<this.length&&p.matches(this[0],e)},not:function(t){var i,n=[];return T(t)&&t.call!==l?this.each(function(e){t.call(this,e)||n.push(this)}):(i="string"==typeof t?this.filter(t):be(t)&&T(t.item)?h.call(t):c(t),this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})),c(n)},has:function(e){return this.filter(function(){return E(e)?c.contains(this,e):c(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!E(e)?e:c(e)},last:function(){var e=this[this.length-1];return e&&!E(e)?e:c(e)},find:function(e){var i=this;return e?"object"==typeof e?c(e).filter(function(){var t=this;return r.some.call(i,function(e){return c.contains(e,t)})}):1==this.length?c(p.qsa(this[0],e)):this.map(function(){return p.qsa(this,e)}):c()},closest:function(i,n){var r=[],o="object"==typeof i&&c(i);return this.each(function(e,t){for(;t&&!(o?0<=o.indexOf(t):p.matches(t,i));)t=t!==n&&!ye(t)&&t.parentNode;t&&r.indexOf(t)<0&&r.push(t)}),c(r)},parents:function(e){for(var t=[],i=this;0<i.length;)i=c.map(i,function(e){return(e=e.parentNode)&&!ye(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return Te(t,e)},parent:function(e){return Te(i(this.pluck("parentNode")),e)},children:function(e){return Te(this.map(function(){return Ce(this)}),e)},contents:function(){return this.map(function(){return this.contentDocument||h.call(this.childNodes)})},siblings:function(e){return Te(this.map(function(e,t){return o.call(Ce(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return c.map(this,function(e){return e[t]})},show:function(){return this.each(function(){var e,t,i;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,d[e]||(t=u.createElement(e),u.body.appendChild(t),i=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),d[e]=i="none"==i?"block":i),d[e]))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(t){var i,n,r=T(t);return this[0]&&!r&&(i=c(t).get(0),n=i.parentNode||1<this.length),this.each(function(e){c(this).wrapAll(r?t.call(this,e):n?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){c(this[0]).before(e=c(e));for(var t;(t=e.children()).length;)e=t.first();c(e).append(this)}return this},wrapInner:function(n){var r=T(n);return this.each(function(e){var t=c(this),i=t.contents(),e=r?n.call(this,e):n;i.length?i.wrapAll(e):t.append(e)})},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(c(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(t){return this.each(function(){var e=c(this);(t===l?"none"==e.css("display"):t)?e.show():e.hide()})},prev:function(e){return c(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return c(this.pluck("nextElementSibling")).filter(e||"*")},html:function(i){return 0 in arguments?this.each(function(e){var t=this.innerHTML;c(this).empty().append(M(this,i,e,t))}):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each(function(e){e=M(this,t,e,this.textContent);this.textContent=null==e?"":""+e}):0 in this?this.pluck("textContent").join(""):null},attr:function(t,i){var e;return"string"!=typeof t||1 in arguments?this.each(function(e){if(1===this.nodeType)if(E(t))for(a in t)Ee(this,a,t[a]);else Ee(this,t,M(this,i,e,this.getAttribute(t)))}):0 in this&&1==this[0].nodeType&&null!=(e=this[0].getAttribute(t))?e:l},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){Ee(this,e)},this)})},prop:function(t,i){return t=J[t]||t,1 in arguments?this.each(function(e){this[t]=M(this,i,e,this[t])}):this[0]&&this[0][t]},removeProp:function(e){return e=J[e]||e,this.each(function(){delete this[e]})},data:function(e,t){var i="data-"+e.replace(B,"-$1").toLowerCase(),i=1 in arguments?this.attr(i,t):this.attr(i);return null!==i?Le(i):l},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each(function(e){this.value=M(this,t,e,this.value)})):this[0]&&(this[0].multiple?c(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(n){var e;return n?this.each(function(e){var t=c(this),e=M(this,n,e,t.offset()),i=t.offsetParent().offset(),e={top:e.top-i.top,left:e.left-i.left};"static"==t.css("position")&&(e.position="relative"),t.css(e)}):this.length?u.documentElement===this[0]||c.contains(u.documentElement,this[0])?{left:(e=this[0].getBoundingClientRect()).left+f.pageXOffset,top:e.top+f.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}:{top:0,left:0}:null},css:function(e,t){if(arguments.length<2){var i,n,r=this[0];if("string"==typeof e)return r?r.style[s(e)]||getComputedStyle(r,"").getPropertyValue(e):void 0;if(m(e))return r?(i={},n=getComputedStyle(r,""),c.each(e,function(e,t){i[t]=r.style[s(t)]||n.getPropertyValue(t)}),i):void 0}var o="";if("string"==S(e))t||0===t?o=j(e)+":"+ke(e,t):this.each(function(){this.style.removeProperty(j(e))});else for(a in e)e[a]||0===e[a]?o+=j(a)+":"+ke(a,e[a])+";":this.each(function(){this.style.removeProperty(j(a))});return this.each(function(){this.style.cssText+=";"+o})},index:function(e){return e?this.indexOf(c(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&r.some.call(this,function(e){return this.test(P(e))},xe(e))},addClass:function(i){return i?this.each(function(e){var t;"className"in this&&(n=[],t=P(this),M(this,i,e,t).split(/\s+/g).forEach(function(e){c(this).hasClass(e)||n.push(e)},this),n.length)&&P(this,t+(t?" ":"")+n.join(" "))}):this},removeClass:function(t){return this.each(function(e){if("className"in this){if(t===l)return P(this,"");n=P(this),M(this,t,e,n).split(/\s+/g).forEach(function(e){n=n.replace(xe(e)," ")}),P(this,n.trim())}})},toggleClass:function(i,n){return i?this.each(function(e){var t=c(this);M(this,i,e,P(this)).split(/\s+/g).forEach(function(e){(n===l?!t.hasClass(e):n)?t.addClass(e):t.removeClass(e)})}):this},scrollTop:function(e){var t;if(this.length)return t="scrollTop"in this[0],e===l?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})},scrollLeft:function(e){var t;if(this.length)return t="scrollLeft"in this[0],e===l?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})},position:function(){var e,t,i,n;if(this.length)return e=this[0],t=this.offsetParent(),i=this.offset(),n=R.test(t[0].nodeName)?{top:0,left:0}:t.offset(),i.top-=parseFloat(c(e).css("margin-top"))||0,i.left-=parseFloat(c(e).css("margin-left"))||0,n.top+=parseFloat(c(t[0]).css("border-top-width"))||0,n.left+=parseFloat(c(t[0]).css("border-left-width"))||0,{top:i.top-n.top,left:i.left-n.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||u.body;e&&!R.test(e.nodeName)&&"static"==c(e).css("position");)e=e.offsetParent;return e})}},c.fn.detach=c.fn.remove,["width","height"].forEach(function(n){var r=n.replace(/./,function(e){return e[0].toUpperCase()});c.fn[n]=function(t){var e,i=this[0];return t===l?we(i)?i["inner"+r]:ye(i)?i.documentElement["scroll"+r]:(e=this.offset())&&e[n]:this.each(function(e){(i=c(this)).css(n,M(this,t,e,i[n]()))})}}),["after","prepend","before","append"].forEach(function(t,a){var s=a%2;c.fn[t]=function(){var i,n,r=c.map(arguments,function(e){var t=[];return"array"==(i=S(e))?(e.forEach(function(e){return e.nodeType!==l?t.push(e):c.zepto.isZ(e)?t=t.concat(e.get()):void(t=t.concat(p.fragment(e)))}),t):"object"==i||null==e?e:p.fragment(e)}),o=1<this.length;return r.length<1?this:this.each(function(e,t){n=s?t:t.parentNode,t=0==a?t.nextSibling:1==a?t.firstChild:2==a?t:null;var i=c.contains(u.documentElement,n);r.forEach(function(e){if(o)e=e.cloneNode(!0);else if(!n)return c(e).remove();n.insertBefore(e,t),i&&function e(t,i){i(t);for(var n=0,r=t.childNodes.length;n<r;n++)e(t.childNodes[n],i)}(e,function(e){var t;null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||(t=e.ownerDocument?e.ownerDocument.defaultView:f).eval.call(t,e.innerHTML)})})})},c.fn[s?t+"To":"insert"+(a?"Before":"After")]=function(e){return c(e)[t](this),this}}),p.Z.prototype=Se.prototype=c.fn,p.uniq=i,p.deserializeValue=Le,c.zepto=p;var l,a,c,n,s,i,r,$,o,h,u,d,t,N,F,z,q,R,B,U,_,Z,V,X,K,W,p,Y,J,m,g,v,Q,w,G,y,ee,te,ie,ne,re,oe,ae,se,b,x,le,ce,he,k,C,ue,de,fe,pe,me,ge,ve,e=c;function S(e){return null==e?String(e):K[W.call(e)]||"object"}function T(e){return"function"==S(e)}function we(e){return null!=e&&e==e.window}function ye(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function E(e){return"object"==S(e)}function L(e){return E(e)&&!we(e)&&Object.getPrototypeOf(e)==Object.prototype}function be(e){var t=!!e&&"length"in e&&e.length,i=c.type(e);return"function"!=i&&!we(e)&&("array"==i||0===t||"number"==typeof t&&0<t&&t-1 in e)}function j(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function xe(e){return e in t?t[e]:t[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function ke(e,t){return"number"!=typeof t||N[j(e)]?t:t+"px"}function Ce(e){return"children"in e?h.call(e.children):c.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function Se(e,t){for(var i=e?e.length:0,n=0;n<i;n++)this[n]=e[n];this.length=i,this.selector=t||""}function Te(e,t){return null==t?c(e):c(e).filter(t)}function M(e,t,i,n){return T(t)?t.call(e,i,n):t}function Ee(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function P(e,t){var i=e.className||"",n=i&&i.baseVal!==l;return t===l?n?i.baseVal:i:void(n?i.baseVal=t:e.className=t)}function Le(t){try{return t&&("true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?c.parseJSON(t):t))}catch(e){return t}}f.Zepto=e,void 0===f.$&&(f.$=e),b=e,le=1,ce=Array.prototype.slice,he=b.isFunction,k={},C={},ue="onfocusin"in f,de={focus:"focusin",blur:"focusout"},fe={mouseenter:"mouseover",mouseleave:"mouseout"},C.click=C.mousedown=C.mouseup=C.mousemove="MouseEvents",b.event={add:Fe,remove:ze},b.proxy=function(e,t){var i,n=2 in arguments&&ce.call(arguments,2);if(he(e))return(i=function(){return e.apply(t,n?n.concat(ce.call(arguments)):arguments)})._zid=O(e),i;if(I(t))return n?(n.unshift(e[t],e),b.proxy.apply(null,n)):b.proxy(e[t],e);throw new TypeError("expected function")},b.fn.bind=function(e,t,i){return this.on(e,t,i)},b.fn.unbind=function(e,t){return this.off(e,t)},b.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)},pe=function(){return!0},me=function(){return!1},ge=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,ve={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},b.fn.delegate=function(e,t,i){return this.on(t,e,i)},b.fn.undelegate=function(e,t,i){return this.off(t,e,i)},b.fn.live=function(e,t){return b(document.body).delegate(this.selector,e,t),this},b.fn.die=function(e,t){return b(document.body).undelegate(this.selector,e,t),this},b.fn.on=function(t,r,i,o,a){var s,l,n=this;return t&&!I(t)?(b.each(t,function(e,t){n.on(e,r,i,t,a)}),n):(I(r)||he(o)||!1===o||(o=i,i=r,r=x),o!==x&&!1!==i||(o=i,i=x),!1===o&&(o=me),n.each(function(e,n){a&&(s=function(e){return ze(n,e.type,o),o.apply(this,arguments)}),Fe(n,t,o,i,r,(l=r?function(e){var t,i=b(e.target).closest(r,n).get(0);return i&&i!==n?(t=b.extend(Re(e),{currentTarget:i,liveFired:n}),(s||o).apply(i,[t].concat(ce.call(arguments,1)))):void 0}:l)||s)}))},b.fn.off=function(e,i,t){var n=this;return e&&!I(e)?(b.each(e,function(e,t){n.off(e,i,t)}),n):(I(i)||he(t)||!1===t||(t=i,i=x),!1===t&&(t=me),n.each(function(){ze(this,e,t,i)}))},b.fn.trigger=function(e,t){return(e=I(e)||b.isPlainObject(e)?b.Event(e):qe(e))._args=t,this.each(function(){e.type in de&&"function"==typeof this[e.type]?this[e.type]():"dispatchEvent"in this?this.dispatchEvent(e):b(this).triggerHandler(e,t)})},b.fn.triggerHandler=function(i,n){var r,o;return this.each(function(e,t){(r=Re(I(i)?b.Event(i):i))._args=n,r.target=t,b.each(Oe(t,i.type||i),function(e,t){return o=t.proxy(r),!r.isImmediatePropagationStopped()&&void 0})}),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){b.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),b.Event=function(e,t){I(e)||(e=(t=e).type);var i=document.createEvent(C[e]||"Events"),n=!0;if(t)for(var r in t)"bubbles"==r?n=!!t[r]:i[r]=t[r];return i.initEvent(e,n,!0),qe(i)},v=e,G=+new Date,y=f.document,ee=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,te=/^(?:text|application)\/javascript/i,ie=/^(?:text|application)\/xml/i,ne="application/json",re="text/html",oe=/^\s*$/,(ae=y.createElement("a")).href=f.location.href,v.active=0,v.ajaxJSONP=function(i,n){var r,o,e,a,s,l,t,c;return"type"in i?(e=i.jsonpCallback,a=(v.isFunction(e)?e():e)||"Zepto"+G++,s=y.createElement("script"),l=f[a],c={abort:t=function(e){v(s).triggerHandler("error",e||"abort")}},n&&n.promise(c),v(s).on("load error",function(e,t){clearTimeout(o),v(s).off().remove(),"error"!=e.type&&r?Pe(r[0],c,i,n):H(null,t||"error",c,i,n),f[a]=l,r&&v.isFunction(l)&&l(r[0]),l=r=void 0}),!1===Me(c,i)?t("abort"):(f[a]=function(){r=arguments},s.src=i.url.replace(/\?(.+)=\?/,"?$1="+a),y.head.appendChild(s),0<i.timeout&&(o=setTimeout(function(){t("timeout")},i.timeout))),c):v.ajax(i)},v.ajaxSettings={type:"GET",beforeSend:A,success:A,error:A,complete:A,context:null,global:!0,xhr:function(){return new f.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:ne,xml:"application/xml, text/xml",html:re,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:A},v.ajax=function(e){var s=v.extend({},e||{}),l=v.Deferred&&v.Deferred();for(Q in v.ajaxSettings)void 0===s[Q]&&(s[Q]=v.ajaxSettings[Q]);(t=s).global&&0==v.active++&&D(t,null,"ajaxStart"),s.crossDomain||((t=y.createElement("a")).href=s.url,t.href=t.href,s.crossDomain=ae.protocol+"//"+ae.host!=t.protocol+"//"+t.host),s.url||(s.url=f.location.toString()),-1<(t=s.url.indexOf("#"))&&(s.url=s.url.slice(0,t)),(t=s).processData&&t.data&&"string"!=v.type(t.data)&&(t.data=v.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=He(t.url,t.data),t.data=void 0);var c=s.dataType,t=/\?.+=\?/.test(s.url);if(t&&(c="jsonp"),!1!==s.cache&&(e&&!0===e.cache||"script"!=c&&"jsonp"!=c)||(s.url=He(s.url,"_="+Date.now())),"jsonp"==c)return t||(s.url=He(s.url,s.jsonp?s.jsonp+"=?":!1===s.jsonp?"":"callback=?")),v.ajaxJSONP(s,l);function i(e,t){n[e.toLowerCase()]=[e,t]}var h,e=s.accepts[c],n={},u=/^([\w-]+:)\/\//.test(s.url)?RegExp.$1:f.location.protocol,d=s.xhr(),r=d.setRequestHeader;if(l&&l.promise(d),s.crossDomain||i("X-Requested-With","XMLHttpRequest"),i("Accept",e||"*/*"),(e=s.mimeType||e)&&(-1<e.indexOf(",")&&(e=e.split(",",2)[0]),d.overrideMimeType)&&d.overrideMimeType(e),(s.contentType||!1!==s.contentType&&s.data&&"GET"!=s.type.toUpperCase())&&i("Content-Type",s.contentType||"application/x-www-form-urlencoded"),s.headers)for(w in s.headers)i(w,s.headers[w]);if(d.setRequestHeader=i,!(d.onreadystatechange=function(){if(4==d.readyState){d.onreadystatechange=A,clearTimeout(h);var e,t=!1;if(200<=d.status&&d.status<300||304==d.status||0==d.status&&"file:"==u){if(c=c||(a=(a=s.mimeType||d.getResponseHeader("content-type"))&&a.split(";",2)[0])&&(a==re?"html":a==ne?"json":te.test(a)?"script":ie.test(a)&&"xml")||"text","arraybuffer"==d.responseType||"blob"==d.responseType)e=d.response;else{e=d.responseText;try{i=e,n=c,e=(r=s).dataFilter==A?i:(o=r.context,r.dataFilter.call(o,i,n)),"script"==c?(0,eval)(e):"xml"==c?e=d.responseXML:"json"==c&&(e=oe.test(e)?null:v.parseJSON(e))}catch(e){t=e}if(t)return H(t,"parsererror",d,s,l)}Pe(e,d,s,l)}else H(d.statusText||null,d.status?"error":"abort",d,s,l)}var i,n,r,o,a})===Me(d,s))d.abort(),H(null,"abort",d,s,l);else{t=!("async"in s)||s.async;if(d.open(s.type,s.url,t,s.username,s.password),s.xhrFields)for(w in s.xhrFields)d[w]=s.xhrFields[w];for(w in n)r.apply(d,n[w]);0<s.timeout&&(h=setTimeout(function(){d.onreadystatechange=A,d.abort(),H(null,"timeout",d,s,l)},s.timeout)),d.send(s.data||null)}return d},v.get=function(){return v.ajax(Ae.apply(null,arguments))},v.post=function(){var e=Ae.apply(null,arguments);return e.type="POST",v.ajax(e)},v.getJSON=function(){var e=Ae.apply(null,arguments);return e.dataType="json",v.ajax(e)},v.fn.load=function(e,t,i){var n,r,o,a;return this.length&&(r=this,o=e.split(/\s/),e=Ae(e,t,i),a=e.success,1<o.length&&(e.url=o[0],n=o[1]),e.success=function(e){r.html(n?v("<div>").html(e.replace(ee,"")).find(n):e),a&&a.apply(r,arguments)},v.ajax(e)),this},se=encodeURIComponent,v.param=function(e,t){var i=[];return i.add=function(e,t){null==(t=v.isFunction(t)?t():t)&&(t=""),this.push(se(e)+"="+se(t))},function i(n,e,r,o){var a,s=v.isArray(e),l=v.isPlainObject(e);v.each(e,function(e,t){a=v.type(t),o&&(e=r?o:o+"["+(l||"object"==a||"array"==a?e:"")+"]"),!o&&s?n.add(t.name,t.value):"array"==a||!r&&"object"==a?i(n,t,r,e):n.add(e,t)})}(i,e,t),i.join("&").replace(/%20/g,"+")},(g=e).fn.serializeArray=function(){function i(e){return e.forEach?e.forEach(i):void t.push({name:n,value:e})}var n,r,t=[];return this[0]&&g.each(this[0].elements,function(e,t){r=t.type,(n=t.name)&&"fieldset"!=t.nodeName.toLowerCase()&&!t.disabled&&"submit"!=r&&"reset"!=r&&"button"!=r&&"file"!=r&&("radio"!=r&&"checkbox"!=r||t.checked)&&i(g(t).val())}),t},g.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},g.fn.submit=function(e){var t;return 0 in arguments?this.bind("submit",e):this.length&&(t=g.Event("submit"),this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()),this};try{getComputedStyle(void 0)}catch(e){var je=getComputedStyle;f.getComputedStyle=function(e,t){try{return je(e,t)}catch(e){return null}}}return e;function D(e,t,i,n){return e.global?(e=t||y,t=i,i=n,t=v.Event(t),v(e).trigger(t,i),!t.isDefaultPrevented()):void 0}function Me(e,t){var i=t.context;return!1!==t.beforeSend.call(i,e,t)&&!1!==D(t,i,"ajaxBeforeSend",[e,t])&&void D(t,i,"ajaxSend",[e,t])}function Pe(e,t,i,n){var r=i.context,o="success";i.success.call(r,e,o,t),n&&n.resolveWith(r,[e,o,t]),D(i,r,"ajaxSuccess",[t,i,e]),De(o,t,i)}function H(e,t,i,n,r){var o=n.context;n.error.call(o,i,t,e),r&&r.rejectWith(o,[i,t,e]),D(n,o,"ajaxError",[i,n,e||t]),De(t,i,n)}function De(e,t,i){var n=i.context;i.complete.call(n,t,e),D(i,n,"ajaxComplete",[t,i]),(e=i).global&&!--v.active&&D(e,null,"ajaxStop")}function A(){}function He(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function Ae(e,t,i,n){return v.isFunction(t)&&(n=i,i=t,t=void 0),v.isFunction(i)||(n=i,i=void 0),{url:e,data:t,success:i,dataType:n}}function O(e){return e._zid||(e._zid=le++)}function Oe(e,t,i,n){var r,o;return(t=Ie(t)).ns&&(o=t.ns,r=new RegExp("(?:^| )"+o.replace(" "," .* ?")+"(?: |$)")),(k[O(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||r.test(e.ns))&&(!i||O(e.fn)===O(i))&&(!n||e.sel==n)})}function Ie(e){e=(""+e).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function $e(e,t){return e.del&&!ue&&e.e in de||!!t}function Ne(e){return fe[e]||ue&&de[e]||e}function Fe(r,e,t,o,a,s,l){var i=O(r),c=k[i]||(k[i]=[]);e.split(/\s/).forEach(function(e){if("ready"==e)return b(document).ready(t);var i=Ie(e),n=(i.fn=t,i.sel=a,i.e in fe&&(t=function(e){var t=e.relatedTarget;return!t||t!==this&&!b.contains(this,t)?i.fn.apply(this,arguments):void 0}),(i.del=s)||t);i.proxy=function(e){var t;if(!(e=qe(e)).isImmediatePropagationStopped())return e.data=o,!1===(t=n.apply(r,e._args==x?[e]:[e].concat(e._args)))&&(e.preventDefault(),e.stopPropagation()),t},i.i=c.length,c.push(i),"addEventListener"in r&&r.addEventListener(Ne(i.e),i.proxy,$e(i,l))})}function ze(t,e,i,n,r){var o=O(t);(e||"").split(/\s/).forEach(function(e){Oe(t,e,i,n).forEach(function(e){delete k[o][e.i],"removeEventListener"in t&&t.removeEventListener(Ne(e.e),e.proxy,$e(e,r))})})}function qe(n,r){return(r||!n.isDefaultPrevented)&&(r=r||n,b.each(ve,function(e,t){var i=r[e];n[e]=function(){return this[t]=pe,i&&i.apply(r,arguments)},n[t]=me}),n.timeStamp||(n.timeStamp=Date.now()),r.defaultPrevented!==x?r.defaultPrevented:"returnValue"in r?!1===r.returnValue:r.getPreventDefault&&r.getPreventDefault())&&(n.isDefaultPrevented=pe),n}function Re(e){var t,i={originalEvent:e};for(t in e)ge.test(t)||e[t]===x||(i[t]=e[t]);return qe(i,e)}function I(e){return"string"==typeof e}}),!function(e){"use strict";"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=e:"function"==typeof define?define.amd||define(["jquery"],e):window.editormd=e()}(function(){"use strict";var w,c,h,u,y="undefined"!=typeof jQuery?jQuery:Zepto;if(void 0!==y)return(w=function(e,t){return new w.fn.init(e,t)}).title=w.$name="Editor.md",w.version="1.5.0",w.homePage="https://pandao.github.io/editor.md/",w.classPrefix="editormd-",w.toolbarModes={full:["undo","redo","|","bold","del","italic","quote","ucwords","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","link","reference-link","image","code","preformatted-text","code-block","table","datetime","emoji","html-entities","pagebreak","|","goto-line","watch","preview","fullscreen","clear","search","|","help","info"],simple:["undo","redo","|","bold","del","italic","quote","uppercase","lowercase","|","h1","h2","h3","h4","h5","h6","|","list-ul","list-ol","hr","|","watch","preview","fullscreen","|","help","info"],mini:["undo","redo","|","watch","preview","|","help","info"]},w.defaults={mode:"gfm",name:"",value:"",theme:"",editorTheme:"default",previewTheme:"",markdown:"",appendMarkdown:"",width:"100%",height:"100%",path:"./lib/",pluginPath:"",delay:300,autoLoadModules:!0,watch:!0,placeholder:"Enjoy Markdown! coding now...",gotoLine:!0,codeFold:!1,autoHeight:!1,autoFocus:!0,autoCloseTags:!0,searchReplace:!0,syncScrolling:!0,readOnly:!1,tabSize:4,indentUnit:4,lineNumbers:!0,lineWrapping:!0,autoCloseBrackets:!0,showTrailingSpace:!0,matchBrackets:!0,indentWithTabs:!0,styleSelectedText:!0,matchWordHighlight:!0,styleActiveLine:!0,dialogLockScreen:!0,dialogShowMask:!0,dialogDraggable:!0,dialogMaskBgColor:"#fff",dialogMaskOpacity:.1,fontSize:"13px",saveHTMLToTextarea:!1,disabledKeyMaps:[],onload:function(){},onresize:function(){},onchange:function(){},onwatch:null,onunwatch:null,onpreviewing:function(){},onpreviewed:function(){},onfullscreen:function(){},onfullscreenExit:function(){},onscroll:function(){},onpreviewscroll:function(){},imageUpload:!1,imageFormats:["jpg","jpeg","gif","png","bmp","webp"],imageUploadURL:"",crossDomainUpload:!1,uploadCallbackURL:"",toc:!0,tocm:!1,tocTitle:"",tocDropdown:!1,tocContainer:"",tocStartLevel:1,htmlDecode:!1,pageBreak:!0,atLink:!0,emailLink:!0,taskList:!1,emoji:!1,tex:!1,flowChart:!1,sequenceDiagram:!1,previewCodeHighlight:!0,toolbar:!0,toolbarAutoFixed:!0,toolbarIcons:"full",toolbarTitles:{},toolbarHandlers:{ucwords:function(){return w.toolbarHandlers.ucwords},lowercase:function(){return w.toolbarHandlers.lowercase}},toolbarCustomIcons:{lowercase:'<a href="javascript:;" title="Lowercase" unselectable="on"><i class="fa" name="lowercase" style="font-size:24px;margin-top: -10px;">a</i></a>',ucwords:'<a href="javascript:;" title="ucwords" unselectable="on"><i class="fa" name="ucwords" style="font-size:20px;margin-top: -3px;">Aa</i></a>'},toolbarIconsClass:{undo:"fa-undo",redo:"fa-repeat",bold:"fa-bold",del:"fa-strikethrough",italic:"fa-italic",quote:"fa-quote-left",uppercase:"fa-font",h1:w.classPrefix+"bold",h2:w.classPrefix+"bold",h3:w.classPrefix+"bold",h4:w.classPrefix+"bold",h5:w.classPrefix+"bold",h6:w.classPrefix+"bold","list-ul":"fa-list-ul","list-ol":"fa-list-ol",hr:"fa-minus",link:"fa-link","reference-link":"fa-anchor",image:"fa-picture-o",code:"fa-code","preformatted-text":"fa-file-code-o","code-block":"fa-file-code-o",table:"fa-table",datetime:"fa-clock-o",emoji:"fa-smile-o","html-entities":"fa-copyright",pagebreak:"fa-newspaper-o","goto-line":"fa-terminal",watch:"fa-eye-slash",unwatch:"fa-eye",preview:"fa-desktop",search:"fa-search",fullscreen:"fa-arrows-alt",clear:"fa-eraser",help:"fa-question-circle",info:"fa-info-circle"},toolbarIconTexts:{},lang:{name:"zh-cn",description:"开源在线Markdown编辑器<br/>Open source online Markdown editor.",tocTitle:"目录",toolbar:{undo:"撤销（Ctrl+Z）",redo:"重做（Ctrl+Y）",bold:"粗体",del:"删除线",italic:"斜体",quote:"引用",ucwords:"将每个单词首字母转成大写",uppercase:"将所选转换成大写",lowercase:"将所选转换成小写",h1:"标题1",h2:"标题2",h3:"标题3",h4:"标题4",h5:"标题5",h6:"标题6","list-ul":"无序列表","list-ol":"有序列表",hr:"横线",link:"链接","reference-link":"引用链接",image:"添加图片",code:"行内代码","preformatted-text":"预格式文本 / 代码块（缩进风格）","code-block":"代码块（多语言风格）",table:"添加表格",datetime:"日期时间",emoji:"Emoji表情","html-entities":"HTML实体字符",pagebreak:"插入分页符","goto-line":"跳转到行",watch:"关闭实时预览",unwatch:"开启实时预览",preview:"全窗口预览HTML（按 Shift + ESC还原）",fullscreen:"全屏（按ESC还原）",clear:"清空",search:"搜索",help:"使用帮助",info:"关于"+w.title},buttons:{enter:"确定",cancel:"取消",close:"关闭"},dialog:{link:{title:"添加链接",url:"链接地址",urlTitle:"链接标题",urlEmpty:"错误：请填写链接地址。"},referenceLink:{title:"添加引用链接",name:"引用名称",url:"链接地址",urlId:"链接ID",urlTitle:"链接标题",nameEmpty:"错误：引用链接的名称不能为空。",idEmpty:"错误：请填写引用链接的ID。",urlEmpty:"错误：请填写引用链接的URL地址。"},image:{title:"添加图片",url:"图片地址",link:"图片链接",alt:"图片描述",uploadButton:"本地上传",imageURLEmpty:"错误：图片地址不能为空。",uploadFileEmpty:"错误：上传的图片不能为空。",formatNotAllowed:"错误：只允许上传图片文件，允许上传的图片文件格式有："},preformattedText:{title:"添加预格式文本或代码块",emptyAlert:"错误：请填写预格式文本或代码的内容。"},codeBlock:{title:"添加代码块",selectLabel:"代码语言：",selectDefaultText:"请选择代码语言",otherLanguage:"其他语言",unselectedLanguageAlert:"错误：请选择代码所属的语言类型。",codeEmptyAlert:"错误：请填写代码内容。"},htmlEntities:{title:"HTML 实体字符"},help:{title:"使用帮助"}}}},w.classNames={tex:w.classPrefix+"tex"},w.dialogZindex=99999,w.$katex=null,w.$marked=null,w.$CodeMirror=null,w.$prettyPrint=null,w.prototype=w.fn={state:{watching:!1,loaded:!1,preview:!1,fullscreen:!1},init:function(e,t){t="object"==typeof e?e:t||{};var i=this.classPrefix=w.classPrefix,t=this.settings=y.extend(!0,w.defaults,t),n=(e="object"==typeof e?t.id:e,this.editor=y("#"+e)),r=(this.id=e,this.lang=t.lang,this.classNames={textarea:{html:i+"html-textarea",markdown:i+"markdown-textarea"}}),o=(t.pluginPath=""===t.pluginPath?t.path+"../plugins/":t.pluginPath,this.state.watching=!!t.watch,n.hasClass("editormd")||n.addClass("editormd"),n.css({width:"number"==typeof t.width?t.width+"px":t.width,height:"number"==typeof t.height?t.height+"px":t.height}),t.autoHeight&&n.css("height","auto"),this.markdownTextarea=n.children("textarea")),e=(o.length<1&&(n.append("<textarea></textarea>"),o=this.markdownTextarea=n.children("textarea")),o.addClass(r.textarea.markdown).attr("placeholder",t.placeholder),void 0!==o.attr("name")&&""!==o.attr("name")||o.attr("name",""!==t.name?t.name:e+"-markdown-doc"),[t.readOnly?"":'<a href="javascript:;" class="fa fa-close '+i+'preview-close-btn"></a>',t.saveHTMLToTextarea?'<textarea class="'+r.textarea.html+'" name="'+e+'-html-code"></textarea>':"",'<div class="'+i+'preview"><div class="markdown-body '+i+'preview-container"></div></div>','<div class="'+i+'container-mask" style="display:block;"></div>','<div class="'+i+'mask"></div>'].join("\n"));return n.append(e).addClass(i+"vertical"),""!==t.theme&&n.addClass(i+"theme-"+t.theme),this.mask=n.children("."+i+"mask"),this.containerMask=n.children("."+i+"container-mask"),""!==t.markdown&&o.val(t.markdown),""!==t.appendMarkdown&&o.val(o.val()+t.appendMarkdown),this.htmlTextarea=n.children("."+r.textarea.html),this.preview=n.children("."+i+"preview"),this.previewContainer=this.preview.children("."+i+"preview-container"),""!==t.previewTheme&&this.preview.addClass(i+"preview-theme-"+t.previewTheme),"function"==typeof define&&define.amd&&("undefined"!=typeof katex&&(w.$katex=katex),t.searchReplace)&&!t.readOnly&&(w.loadCSS(t.path+"codemirror/addon/dialog/dialog"),w.loadCSS(t.path+"codemirror/addon/search/matchesonscrollbar")),"function"==typeof define&&define.amd||!t.autoLoadModules?("undefined"!=typeof CodeMirror&&(w.$CodeMirror=CodeMirror),"undefined"!=typeof marked&&(w.$marked=marked),this.setCodeMirror().setToolbar().loadedDisplay()):this.loadQueues(),this},loadQueues:function(){function e(){!w.isIE8&&(i.flowChart||i.sequenceDiagram)?w.loadScript(n+"raphael.min",function(){w.loadScript(n+"underscore.min",function(){!i.flowChart&&i.sequenceDiagram?w.loadScript(n+"sequence-diagram.min",function(){t.loadedDisplay()}):i.flowChart&&!i.sequenceDiagram?w.loadScript(n+"flowchart.min",function(){w.loadScript(n+"jquery.flowchart.min",function(){t.loadedDisplay()})}):i.flowChart&&i.sequenceDiagram&&w.loadScript(n+"flowchart.min",function(){w.loadScript(n+"jquery.flowchart.min",function(){w.loadScript(n+"sequence-diagram.min",function(){t.loadedDisplay()})})})})}):t.loadedDisplay()}var t=this,i=this.settings,n=i.path;return w.loadCSS(n+"codemirror/codemirror.min"),i.searchReplace&&!i.readOnly&&(w.loadCSS(n+"codemirror/addon/dialog/dialog"),w.loadCSS(n+"codemirror/addon/search/matchesonscrollbar")),i.codeFold&&w.loadCSS(n+"codemirror/addon/fold/foldgutter"),w.loadScript(n+"codemirror/codemirror.min",function(){w.$CodeMirror=CodeMirror,w.loadScript(n+"codemirror/modes.min",function(){w.loadScript(n+"codemirror/addons.min",function(){return t.setCodeMirror(),"gfm"!==i.mode&&"markdown"!==i.mode?(t.loadedDisplay(),!1):(t.setToolbar(),void w.loadScript(n+"marked.min",function(){w.$marked=marked,i.previewCodeHighlight?w.loadScript(n+"prettify.min",function(){e()}):e()}))})})}),this},setTheme:function(e){var t=this.editor,i=this.settings.theme,n=this.classPrefix+"theme-";return t.removeClass(n+i).addClass(n+e),this.settings.theme=e,this},setEditorTheme:function(e){var t=this.settings;return"default"!==(t.editorTheme=e)&&w.loadCSS(t.path+"codemirror/theme/"+t.editorTheme),this.cm.setOption("theme",e),this},setCodeMirrorTheme:function(e){return this.setEditorTheme(e),this},setPreviewTheme:function(e){var t=this.preview,i=this.settings.previewTheme,n=this.classPrefix+"preview-theme-";return t.removeClass(n+i).addClass(n+e),this.settings.previewTheme=e,this},setCodeMirror:function(){var e=this.settings,t=this.editor,i=("default"!==e.editorTheme&&w.loadCSS(e.path+"codemirror/theme/"+e.editorTheme),{mode:e.mode,theme:e.editorTheme,tabSize:e.tabSize,dragDrop:!1,autofocus:e.autoFocus,autoCloseTags:e.autoCloseTags,readOnly:!!e.readOnly&&"nocursor",indentUnit:e.indentUnit,lineNumbers:e.lineNumbers,lineWrapping:e.lineWrapping,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:e.codeFold,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],matchBrackets:e.matchBrackets,indentWithTabs:e.indentWithTabs,styleActiveLine:e.styleActiveLine,styleSelectedText:e.styleSelectedText,autoCloseBrackets:e.autoCloseBrackets,showTrailingSpace:e.showTrailingSpace,highlightSelectionMatches:!!e.matchWordHighlight&&{showToken:"onselected"!==e.matchWordHighlight&&/\w/}});return this.codeEditor=this.cm=w.$CodeMirror.fromTextArea(this.markdownTextarea[0],i),this.codeMirror=this.cmElement=t.children(".CodeMirror"),""!==e.value&&this.cm.setValue(e.value),this.codeMirror.css({fontSize:e.fontSize,width:e.watch?"50%":"100%"}),e.autoHeight&&(this.codeMirror.css("height","auto"),this.cm.setOption("viewportMargin",1/0)),e.lineNumbers||this.codeMirror.find(".CodeMirror-gutters").css("border-right","none"),this},getCodeMirrorOption:function(e){return this.cm.getOption(e)},setCodeMirrorOption:function(e,t){return this.cm.setOption(e,t),this},addKeyMap:function(e,t){return this.cm.addKeyMap(e,t),this},removeKeyMap:function(e){return this.cm.removeKeyMap(e),this},gotoLine:function(e){var t,i,n,r,o=this.settings;return o.gotoLine&&(t=this.cm,this.editor,n=t.lineCount(),i=this.preview,"number"!=typeof(e="string"==typeof e&&"first"===(e="last"===e?n:e)?1:e)?alert("Error: The line number must be an integer."):n<(e=parseInt(e)-1)?alert("Error: The line number range 1-"+n):(t.setCursor({line:e,ch:0}),n=t.getScrollInfo().clientHeight,e=t.charCoords({line:e,ch:0},"local"),t.scrollTo(null,(e.top+e.bottom-n)/2),o.watch&&(e=this.codeMirror.find(".CodeMirror-scroll")[0],n=y(e).height(),r=(o=e.scrollTop)/e.scrollHeight,i.scrollTop(0===o?0:o+n>=e.scrollHeight-16?i[0].scrollHeight:i[0].scrollHeight*r)),t.focus())),this},extend:function(){return void 0!==arguments[1]&&("function"==typeof arguments[1]&&(arguments[1]=y.proxy(arguments[1],this)),this[arguments[0]]=arguments[1]),"object"==typeof arguments[0]&&void 0===arguments[0].length&&y.extend(!0,this,arguments[0]),this},set:function(e,t){return void 0!==t&&"function"==typeof t&&(t=y.proxy(t,this)),this[e]=t,this},config:function(e,t){var i=this.settings;return"object"==typeof e&&(i=y.extend(!0,i,e)),"string"==typeof e&&(i[e]=t),this.settings=i,this.recreate(),this},on:function(e,t){var i=this.settings;return void 0!==i["on"+e]&&(i["on"+e]=y.proxy(t,this)),this},off:function(e){var t=this.settings;return void 0!==t["on"+e]&&(t["on"+e]=function(){}),this},showToolbar:function(e){var t=this.settings;return t.readOnly||(t.toolbar&&(this.toolbar.length<1||""===this.toolbar.find("."+this.classPrefix+"menu").html())&&this.setToolbar(),t.toolbar=!0,this.toolbar.show(),this.resize(),y.proxy(e||function(){},this)()),this},hideToolbar:function(e){return this.settings.toolbar=!1,this.toolbar.hide(),this.resize(),y.proxy(e||function(){},this)(),this},setToolbarAutoFixed:function(e){var t=this.state,i=this.editor,n=this.toolbar,r=this.settings;void 0!==e&&(r.toolbarAutoFixed=e);return!t.fullscreen&&!t.preview&&r.toolbar&&r.toolbarAutoFixed&&y(window).bind("scroll",function(){var e=y(window),t=e.scrollTop();return!!r.toolbarAutoFixed&&void n.css(10<t-i.offset().top&&t<i.height()?{position:"fixed",width:i.width()+"px",left:(e.width()-i.width())/2+"px"}:{position:"absolute",width:"100%",left:0})}),this},setToolbar:function(){var e=this.settings;if(!e.readOnly){var t=this.editor,i=(this.preview,this.classPrefix),n=this.toolbar=t.children("."+i+"toolbar");if(e.toolbar&&n.length<1&&(t.append('<div class="'+i+'toolbar"><div class="'+i+'toolbar-container"><ul class="'+i+'menu"></ul></div></div>'),n=this.toolbar=t.children("."+i+"toolbar")),e.toolbar){n.show();for(var r="function"==typeof e.toolbarIcons?e.toolbarIcons():"string"==typeof e.toolbarIcons?w.toolbarModes[e.toolbarIcons]:e.toolbarIcons,t=n.find("."+this.classPrefix+"menu"),o="",a=!1,s=0,l=r.length;s<l;s++){var c,h,u,d,f,p=r[s];"||"===p?a=!0:"|"===p?o+='<li class="divider" unselectable="on">|</li>':(c=/h(\d)/.test(p),"watch"!==(d=p)||e.watch||(d="unwatch"),h=void 0===(h=e.lang.toolbar[d])?"":h,u=void 0===(u=e.toolbarIconTexts[d])?"":u,d=void 0===(d=e.toolbarIconsClass[d])?"":d,f=a?'<li class="pull-right">':"<li>",void 0!==e.toolbarCustomIcons[p]&&"function"!=typeof e.toolbarCustomIcons[p]?f+=e.toolbarCustomIcons[p]:f=(f+='<a href="javascript:;" title="'+h+'" unselectable="on">')+('<i class="fa '+d+'" name="'+p+'" unselectable="on">'+(c?p.toUpperCase():""===d?u:"")+"</i>")+"</a>",f+="</li>",o=a?f+o:o+f)}t.html(o),t.find('[title="Lowercase"]').attr("title",e.lang.toolbar.lowercase),t.find('[title="ucwords"]').attr("title",e.lang.toolbar.ucwords),this.setToolbarHandler(),this.setToolbarAutoFixed()}else n.hide()}return this},dialogLockScreen:function(){return y.proxy(w.dialogLockScreen,this)(),this},dialogShowMask:function(e){return y.proxy(w.dialogShowMask,this)(e),this},getToolbarHandles:function(e){var t=this.toolbarHandlers=w.toolbarHandlers;return e&&void 0!==toolbarIconHandlers[e]?t[e]:t},setToolbarHandler:function(){var o,e,t,a,s=this,l=this.settings;return l.toolbar&&!l.readOnly&&(t=this.toolbar,o=this.cm,e=this.classPrefix,t=this.toolbarIcons=t.find("."+e+"menu > li > a"),a=this.getToolbarHandles(),t.bind(w.mouseOrTouch("click","touchend"),function(e){var t=y(this).children(".fa"),i=t.attr("name"),n=o.getCursor(),r=o.getSelection();return""!==i?(s.activeIcon=t,void 0!==a[i]?y.proxy(a[i],s)(o):void 0!==l.toolbarHandlers[i]&&y.proxy(l.toolbarHandlers[i],s)(o,t,n,r),"link"!==i&&"reference-link"!==i&&"image"!==i&&"code-block"!==i&&"preformatted-text"!==i&&"watch"!==i&&"preview"!==i&&"search"!==i&&"fullscreen"!==i&&"info"!==i&&o.focus(),!1):void 0})),this},createDialog:function(e){return y.proxy(w.createDialog,this)(e)},createInfoDialog:function(){var e=this,t=this.editor,i=this.classPrefix,n=['<div class="'+i+"dialog "+i+'dialog-info" style="">','<div class="'+i+'dialog-container">','<h1><i class="editormd-logo editormd-logo-lg editormd-logo-color"></i> '+w.title+"<small>v"+w.version+"</small></h1>","<p>"+this.lang.description+"</p>",'<p style="margin: 10px 0 20px 0;"><a href="'+w.homePage+'" target="_blank">'+w.homePage+' <i class="fa fa-external-link"></i></a></p>','<p style="font-size: 0.85em;">Copyright &copy; 2015 <a href="https://github.com/pandao" target="_blank" class="hover-link">Pandao</a>, The <a href="https://github.com/pandao/editor.md/blob/master/LICENSE" target="_blank" class="hover-link">MIT</a> License.</p>',"</div>",'<a href="javascript:;" class="fa fa-close '+i+'dialog-close"></a>',"</div>"].join("\n"),n=(t.append(n),this.infoDialog=t.children("."+i+"dialog-info"));return n.find("."+i+"dialog-close").bind(w.mouseOrTouch("click","touchend"),function(){e.hideInfoDialog()}),n.css("border",w.isIE8?"1px solid #ddd":"").css("z-index",w.dialogZindex).show(),this.infoDialogPosition(),this},infoDialogPosition:function(){function e(){t.css({top:(y(window).height()-t.height())/2+"px",left:(y(window).width()-t.width())/2+"px"})}var t=this.infoDialog;return e(),y(window).resize(e),this},showInfoDialog:function(){y("html,body").css("overflow-x","hidden");var e=this.editor,t=this.settings,e=this.infoDialog=e.children("."+this.classPrefix+"dialog-info");return e.length<1&&this.createInfoDialog(),this.lockScreen(!0),this.mask.css({opacity:t.dialogMaskOpacity,backgroundColor:t.dialogMaskBgColor}).show(),e.css("z-index",w.dialogZindex).show(),this.infoDialogPosition(),this},hideInfoDialog:function(){return y("html,body").css("overflow-x",""),this.infoDialog.hide(),this.mask.hide(),this.lockScreen(!1),this},lockScreen:function(e){return w.lockScreen(e),this.resize(),this},recreate:function(){var e=this.editor,t=this.settings;return this.codeMirror.remove(),this.setCodeMirror(),t.readOnly||(0<e.find(".editormd-dialog").length&&e.find(".editormd-dialog").remove(),t.toolbar&&(this.getToolbarHandles(),this.setToolbar())),this.loadedDisplay(!0),this},previewCodeHighlight:function(){var e=this.settings,t=this.previewContainer;return e.previewCodeHighlight&&(t.find("pre").addClass("prettyprint linenums"),"undefined"!=typeof prettyPrint)&&prettyPrint(),this},katexRender:function(){return null===c||this.previewContainer.find("."+w.classNames.tex).each(function(){var e=y(this);w.$katex.render(e.text(),e[0]),e.find(".katex").css("font-size","1.6em")}),this},flowChartAndSequenceDiagramRender:function(){var e=this.settings,t=this.previewContainer;if(!w.isIE8){if(e.flowChart){if(null===h)return this;t.find(".flowchart").flowChart()}e.sequenceDiagram&&t.find(".sequence-diagram").sequenceDiagram({theme:"simple"});var e=this.preview,t=this.codeMirror.find(".CodeMirror-scroll"),i=t.height(),n=t.scrollTop(),r=n/t[0].scrollHeight,o=0;e.find(".markdown-toc-list").each(function(){o+=y(this).height()});var a=e.find(".editormd-toc-menu").height()||0;e.scrollTop(0===n?0:n+i>=t[0].scrollHeight-16?e[0].scrollHeight:(e[0].scrollHeight+o+a)*r)}return this},registerKeyMaps:function(e){var t=this,i=this.cm,n=this.settings,r=w.toolbarHandlers,o=n.disabledKeyMaps;if(e=e||null)for(var a in e)y.inArray(a,o)<0&&(e[a],i.addKeyMap(e));else{for(var s in w.keyMaps){var l,c=w.keyMaps[s],c="string"==typeof c?y.proxy(r[c],t):y.proxy(c,t);y.inArray(s,["F9","F10","F11"])<0&&y.inArray(s,o)<0&&((l={})[s]=c,i.addKeyMap(l))}y(window).keydown(function(e){if(y.inArray({120:"F9",121:"F10",122:"F11"}[e.keyCode],o)<0)switch(e.keyCode){case 120:return y.proxy(r.watch,t)(),!1;case 121:return y.proxy(r.preview,t)(),!1;case 122:return y.proxy(r.fullscreen,t)(),!1}})}return this},bindScrollEvent:function(){var e,t,i,n,a=this,s=this.preview,l=this.settings,o=this.codeMirror,r=w.mouseOrTouch;return l.syncScrolling&&(i=function(){s.bind(r("scroll","touchmove"),function(e){var t=y(this).height(),i=y(this).scrollTop(),n=i/y(this)[0].scrollHeight,r=o.find(".CodeMirror-scroll");r.scrollTop(0===i?0:i+t>=y(this)[0].scrollHeight?r[0].scrollHeight:r[0].scrollHeight*n),y.proxy(l.onpreviewscroll,a)(e)})},n=function(){s.unbind(r("scroll","touchmove"))},o.bind({mouseover:e=function(){o.find(".CodeMirror-scroll").bind(r("scroll","touchmove"),function(e){var t=y(this).height(),i=y(this).scrollTop(),n=i/y(this)[0].scrollHeight,r=0;s.find(".markdown-toc-list").each(function(){r+=y(this).height()});var o=s.find(".editormd-toc-menu").height()||0;s.scrollTop(0===i?0:i+t>=y(this)[0].scrollHeight-16?s[0].scrollHeight:(s[0].scrollHeight+r+o)*n),y.proxy(l.onscroll,a)(e)})},mouseout:t=function(){o.find(".CodeMirror-scroll").unbind(r("scroll","touchmove"))},touchstart:e,touchend:t}),"single"!==l.syncScrolling)&&s.bind({mouseover:i,mouseout:n,touchstart:i,touchend:n}),this},bindChangeEvent:function(){var i=this,e=this.cm,n=this.settings;return n.syncScrolling&&e.on("change",function(e,t){n.watch&&i.previewContainer.css("padding",n.autoHeight?"20px 20px 50px 40px":"20px"),c=setTimeout(function(){clearTimeout(c),i.save(),c=null},n.delay)}),this},loadedDisplay:function(e){e=e||!1;var t=this,i=this.editor,n=this.preview,r=this.settings;return this.containerMask.hide(),this.save(),r.watch&&n.show(),i.data("oldWidth",i.width()).data("oldHeight",i.height()),this.resize(),this.registerKeyMaps(),y(window).resize(function(){t.resize()}),this.bindScrollEvent().bindChangeEvent(),e||y.proxy(r.onload,this)(),this.state.loaded=!0,this},width:function(e){return this.editor.css("width","number"==typeof e?e+"px":e),this.resize(),this},height:function(e){return this.editor.css("height","number"==typeof e?e+"px":e),this.resize(),this},resize:function(e,t){t=t||null;var i=this.state,n=this.editor,r=this.preview,o=this.toolbar,a=this.settings,s=this.codeMirror;return(e=e||null)&&n.css("width","number"==typeof e?e+"px":e),!a.autoHeight||i.fullscreen||i.preview?(t&&n.css("height","number"==typeof t?t+"px":t),i.fullscreen&&n.height(y(window).height()),a.toolbar&&!a.readOnly?s.css("margin-top",o.height()+1).height(n.height()-o.height()):s.css("margin-top",0).height(n.height())):(n.css("height","auto"),s.css("height","auto")),a.watch?(s.width(n.width()/2),r.width(i.preview?n.width():n.width()/2),this.previewContainer.css("padding",a.autoHeight?"20px 20px 50px 40px":"20px"),a.toolbar&&!a.readOnly?r.css("top",o.height()+1):r.css("top",0),!a.autoHeight||i.fullscreen||i.preview?(e=a.toolbar&&!a.readOnly?n.height()-o.height():n.height(),r.height(e)):r.height("")):(s.width(n.width()),r.hide()),i.loaded&&y.proxy(a.onresize,this)(),this},save:function(){var e,t,i,n,r,o,a,s,l;return null!==c&&(t=(e=this).state,i=this.settings,s=(n=this.cm).getValue(),r=this.previewContainer,"gfm"!==i.mode&&"markdown"!==i.mode?this.markdownTextarea.val(s):(l=w.$marked,o=this.markdownToC=[],a=this.markedRendererOptions={toc:i.toc,tocm:i.tocm,tocStartLevel:i.tocStartLevel,pageBreak:i.pageBreak,taskList:i.taskList,emoji:i.emoji,tex:i.tex,atLink:i.atLink,emailLink:i.emailLink,flowChart:i.flowChart,sequenceDiagram:i.sequenceDiagram,previewCodeHighlight:i.previewCodeHighlight},a=this.markedOptions={renderer:w.markedRenderer(o,a),gfm:!0,tables:!0,breaks:!0,pedantic:!1,sanitize:!i.htmlDecode,smartLists:!0,smartypants:!0},l.setOptions(a),l=w.$marked(s,a),l=w.filterHTMLTags(l,i.htmlDecode),this.markdownTextarea.text(s),n.save(),i.saveHTMLToTextarea&&this.htmlTextarea.text(l),(i.watch||!i.watch&&t.preview)&&(r.html(l),this.previewCodeHighlight(),i.toc&&(s=(a=""===i.tocContainer?r:y(i.tocContainer)).find("."+this.classPrefix+"toc-menu"),a.attr("previewContainer",""===i.tocContainer?"true":"false"),""!==i.tocContainer&&0<s.length&&s.remove(),w.markdownToCRenderer(o,a,i.tocDropdown,i.tocStartLevel),(i.tocDropdown||0<a.find("."+this.classPrefix+"toc-menu").length)&&w.tocDropdownMenu(a,(""!==i.tocTitle?i:this.lang).tocTitle),""!==i.tocContainer)&&r.find(".markdown-toc").css("border","none"),i.tex&&(!w.kaTeXLoaded&&i.autoLoadModules?w.loadKaTeX(function(){w.$katex=katex,w.kaTeXLoaded=!0,e.katexRender()}):(w.$katex=katex,this.katexRender())),(i.flowChart||i.sequenceDiagram)&&(h=setTimeout(function(){clearTimeout(h),e.flowChartAndSequenceDiagramRender(),h=null},10)),t.loaded)&&y.proxy(i.onchange,this)())),this},focus:function(){return this.cm.focus(),this},setCursor:function(e){return this.cm.setCursor(e),this},getCursor:function(){return this.cm.getCursor()},setSelection:function(e,t){return this.cm.setSelection(e,t),this},getSelection:function(){return this.cm.getSelection()},setSelections:function(e){return this.cm.setSelections(e),this},getSelections:function(){return this.cm.getSelections()},replaceSelection:function(e){return this.cm.replaceSelection(e),this},insertValue:function(e){return this.replaceSelection(e),this},appendMarkdown:function(e){this.settings;var t=this.cm;return t.setValue(t.getValue()+e),this},setMarkdown:function(e){return this.cm.setValue(e||this.settings.markdown),this},getMarkdown:function(){return this.cm.getValue()},getValue:function(){return this.cm.getValue()},setValue:function(e){return this.cm.setValue(e),this},clear:function(){return this.cm.setValue(""),this},getHTML:function(){return this.settings.saveHTMLToTextarea?this.htmlTextarea.val():(alert("Error: settings.saveHTMLToTextarea == false"),!1)},getTextareaSavedHTML:function(){return this.getHTML()},getPreviewedHTML:function(){return this.settings.watch?this.previewContainer.html():(alert("Error: settings.watch == false"),!1)},watch:function(e){var t,i,n,r=this.settings;return y.inArray(r.mode,["gfm","markdown"])<0||(this.state.watching=r.watch=!0,this.preview.show(),this.toolbar&&(t=r.toolbarIconsClass.watch,i=r.toolbarIconsClass.unwatch,(n=this.toolbar.find(".fa[name=watch]")).parent().attr("title",r.lang.toolbar.watch),n.removeClass(i).addClass(t)),this.codeMirror.css("border-right","1px solid #ddd").width(this.editor.width()/2),c=0,this.save().resize(),r.onwatch||(r.onwatch=e||function(){}),y.proxy(r.onwatch,this)()),this},unwatch:function(e){var t,i,n,r=this.settings;return this.state.watching=r.watch=!1,this.preview.hide(),this.toolbar&&(t=r.toolbarIconsClass.watch,i=r.toolbarIconsClass.unwatch,(n=this.toolbar.find(".fa[name=watch]")).parent().attr("title",r.lang.toolbar.unwatch),n.removeClass(t).addClass(i)),this.codeMirror.css("border-right","none").width(this.editor.width()),this.resize(),r.onunwatch||(r.onunwatch=e||function(){}),y.proxy(r.onunwatch,this)(),this},show:function(e){e=e||function(){};var t=this;return this.editor.show(0,function(){y.proxy(e,t)()}),this},hide:function(e){e=e||function(){};var t=this;return this.editor.hide(0,function(){y.proxy(e,t)()}),this},previewing:function(){var t=this,e=this.editor,i=this.preview,n=this.toolbar,r=this.settings,o=this.codeMirror,a=this.previewContainer;if(y.inArray(r.mode,["gfm","markdown"])<0)return this;r.toolbar&&n&&(n.toggle(),n.find(".fa[name=preview]").toggleClass("active")),o.toggle();function s(e){e.shiftKey&&27===e.keyCode&&t.previewed()}"none"===o.css("display")?(this.state.preview=!0,this.state.fullscreen&&i.css("background","#fff"),e.find("."+this.classPrefix+"preview-close-btn").show().bind(w.mouseOrTouch("click","touchend"),function(){t.previewed()}),r.watch?a.css("padding",""):this.save(),a.addClass(this.classPrefix+"preview-active"),i.show().css({position:"",top:0,width:e.width(),height:r.autoHeight&&!this.state.fullscreen?"auto":e.height()}),this.state.loaded&&y.proxy(r.onpreviewing,this)(),y(window).bind("keyup",s)):(y(window).unbind("keyup",s),this.previewed())},previewed:function(){var e=this.editor,t=this.preview,i=this.toolbar,n=this.settings,r=this.previewContainer,o=e.find("."+this.classPrefix+"preview-close-btn");return this.state.preview=!1,this.codeMirror.show(),n.toolbar&&i.show(),t[n.watch?"show":"hide"](),o.hide().unbind(w.mouseOrTouch("click","touchend")),r.removeClass(this.classPrefix+"preview-active"),n.watch&&r.css("padding","20px"),t.css({background:null,position:"absolute",width:e.width()/2,height:n.autoHeight&&!this.state.fullscreen?"auto":e.height()-i.height(),top:n.toolbar?i.height():0}),this.state.loaded&&y.proxy(n.onpreviewed,this)(),this},fullscreen:function(){function e(e){e.shiftKey||27!==e.keyCode||i.fullscreen&&t.fullscreenExit()}var t=this,i=this.state,n=this.editor,r=(this.preview,this.toolbar),o=this.settings,a=this.classPrefix+"fullscreen";r&&r.find(".fa[name=fullscreen]").parent().toggleClass("active");return n.hasClass(a)?(y(window).unbind("keyup",e),this.fullscreenExit()):(i.fullscreen=!0,y("html,body").css("overflow","hidden"),n.css({width:y(window).width(),height:y(window).height()}).addClass(a),this.resize(),y.proxy(o.onfullscreen,this)(),y(window).bind("keyup",e)),this},fullscreenExit:function(){var e=this.editor,t=this.settings,i=this.toolbar,n=this.classPrefix+"fullscreen";return this.state.fullscreen=!1,i&&i.find(".fa[name=fullscreen]").parent().removeClass("active"),y("html,body").css("overflow",""),e.css({width:e.data("oldWidth"),height:e.data("oldHeight")}).removeClass(n),this.resize(),y.proxy(t.onfullscreenExit,this)(),this},executePlugin:function(e,t){var i=this,n=this.cm;return t=this.settings.pluginPath+t,"function"==typeof define?void 0===this[e]?alert("Error: "+e+" plugin is not found, you are not load this plugin."):this[e](n):y.inArray(t,w.loadFiles.plugin)<0?w.loadPlugin(t,function(){w.loadPlugins[e]=i[e],i[e](n)}):y.proxy(w.loadPlugins[e],this)(n),this},search:function(e){var t=this.settings;return t.searchReplace?t.readOnly||this.cm.execCommand(e||"find"):alert("Error: settings.searchReplace == false"),this},searchReplace:function(){return this.search("replace"),this},searchReplaceAll:function(){return this.search("replaceAll"),this}},w.fn.init.prototype=w.fn,w.dialogLockScreen=function(){(this.settings||{dialogLockScreen:!0}).dialogLockScreen&&(y("html,body").css("overflow","hidden"),this.resize())},w.dialogShowMask=function(e){var t=this.editor,i=this.settings||{dialogShowMask:!0};e.css({top:(y(window).height()-e.height())/2+"px",left:(y(window).width()-e.width())/2+"px"}),i.dialogShowMask&&t.children("."+this.classPrefix+"mask").css("z-index",parseInt(e.css("z-index"))-1).show()},w.toolbarHandlers={undo:function(){this.cm.undo()},redo:function(){this.cm.redo()},bold:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("**"+i+"**"),""===i&&e.setCursor(t.line,t.ch+2)},del:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("~~"+i+"~~"),""===i&&e.setCursor(t.line,t.ch+2)},italic:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("*"+i+"*"),""===i&&e.setCursor(t.line,t.ch+1)},quote:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("> "+i),e.setCursor(t.line,t.ch+2)):e.replaceSelection("> "+i)},ucfirst:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(w.firstUpperCase(t)),e.setSelections(i)},ucwords:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(w.wordsFirstUpperCase(t)),e.setSelections(i)},uppercase:function(){var e=this.cm,t=e.getSelection(),i=e.listSelections();e.replaceSelection(t.toUpperCase()),e.setSelections(i)},lowercase:function(){var e=this.cm,t=(e.getCursor(),e.getSelection()),i=e.listSelections();e.replaceSelection(t.toLowerCase()),e.setSelections(i)},h1:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("# "+i),e.setCursor(t.line,t.ch+2)):e.replaceSelection("# "+i)},h2:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("## "+i),e.setCursor(t.line,t.ch+3)):e.replaceSelection("## "+i)},h3:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("### "+i),e.setCursor(t.line,t.ch+4)):e.replaceSelection("### "+i)},h4:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("#### "+i),e.setCursor(t.line,t.ch+5)):e.replaceSelection("#### "+i)},h5:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("##### "+i),e.setCursor(t.line,t.ch+6)):e.replaceSelection("##### "+i)},h6:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();0!==t.ch?(e.setCursor(t.line,0),e.replaceSelection("###### "+i),e.setCursor(t.line,t.ch+7)):e.replaceSelection("###### "+i)},"list-ul":function(){var e=this.cm,t=(e.getCursor(),e.getSelection());if(""===t)e.replaceSelection("- "+t);else{for(var i=t.split("\n"),n=0,r=i.length;n<r;n++)i[n]=""===i[n]?"":"- "+i[n];e.replaceSelection(i.join("\n"))}},"list-ol":function(){var e=this.cm,t=(e.getCursor(),e.getSelection());if(""===t)e.replaceSelection("1. "+t);else{for(var i=t.split("\n"),n=0,r=i.length;n<r;n++)i[n]=""===i[n]?"":n+1+". "+i[n];e.replaceSelection(i.join("\n"))}},hr:function(){var e=this.cm,t=e.getCursor();e.getSelection(),e.replaceSelection((0!==t.ch?"\n\n":"\n")+"------------\n\n")},tex:function(){if(!this.settings.tex)return alert("settings.tex === false"),this;var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("$$"+i+"$$"),""===i&&e.setCursor(t.line,t.ch+2)},link:function(){this.executePlugin("linkDialog","link-dialog/link-dialog")},"reference-link":function(){this.executePlugin("referenceLinkDialog","reference-link-dialog/reference-link-dialog")},pagebreak:function(){if(!this.settings.pageBreak)return alert("settings.pageBreak === false"),this;var e=this.cm;e.getSelection(),e.replaceSelection("\r\n[========]\r\n")},image:function(){this.executePlugin("imageDialog","image-dialog/image-dialog")},code:function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("`"+i+"`"),""===i&&e.setCursor(t.line,t.ch+1)},"code-block":function(){this.executePlugin("codeBlockDialog","code-block-dialog/code-block-dialog")},"preformatted-text":function(){this.executePlugin("preformattedTextDialog","preformatted-text-dialog/preformatted-text-dialog")},table:function(){this.executePlugin("tableDialog","table-dialog/table-dialog")},datetime:function(){var e=this.cm,t=(e.getSelection(),new Date,this.settings.lang.name),t=w.dateFormat()+" "+w.dateFormat("zh-cn"===t||"zh-tw"===t?"cn-week-day":"week-day");e.replaceSelection(t)},emoji:function(){this.executePlugin("emojiDialog","emoji-dialog/emoji-dialog")},"html-entities":function(){this.executePlugin("htmlEntitiesDialog","html-entities-dialog/html-entities-dialog")},"goto-line":function(){this.executePlugin("gotoLineDialog","goto-line-dialog/goto-line-dialog")},watch:function(){this[this.settings.watch?"unwatch":"watch"]()},preview:function(){this.previewing()},fullscreen:function(){this.fullscreen()},clear:function(){this.clear()},search:function(){this.search()},help:function(){this.executePlugin("helpDialog","help-dialog/help-dialog")},info:function(){this.showInfoDialog()}},w.keyMaps={"Ctrl-1":"h1","Ctrl-2":"h2","Ctrl-3":"h3","Ctrl-4":"h4","Ctrl-5":"h5","Ctrl-6":"h6","Ctrl-B":"bold","Ctrl-D":"datetime","Ctrl-E":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();return this.settings.emoji?(e.replaceSelection(":"+i+":"),void(""===i&&e.setCursor(t.line,t.ch+1))):void alert("Error: settings.emoji == false")},"Ctrl-Alt-G":"goto-line","Ctrl-H":"hr","Ctrl-I":"italic","Ctrl-K":"code","Ctrl-L":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("["+i+"]("+(""===i?"":' "'+i+'"')+")"),""===i&&e.setCursor(t.line,t.ch+1)},"Ctrl-U":"list-ul","Shift-Ctrl-A":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();return this.settings.atLink?(e.replaceSelection("@"+i),void(""===i&&e.setCursor(t.line,t.ch+1))):void alert("Error: settings.atLink == false")},"Shift-Ctrl-C":"code","Shift-Ctrl-Q":"quote","Shift-Ctrl-S":"del","Shift-Ctrl-K":"tex","Shift-Alt-C":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection(["```",i,"```"].join("\n")),""===i&&e.setCursor(t.line,t.ch+3)},"Shift-Ctrl-Alt-C":"code-block","Shift-Ctrl-H":"html-entities","Shift-Alt-H":"help","Shift-Ctrl-E":"emoji","Shift-Ctrl-U":"uppercase","Shift-Alt-U":"ucwords","Shift-Ctrl-Alt-U":"ucfirst","Shift-Alt-L":"lowercase","Shift-Ctrl-I":function(){var e=this.cm,t=e.getCursor(),i=e.getSelection();e.replaceSelection("!["+i+"]("+(""===i?"":' "'+i+'"')+")"),""===i&&e.setCursor(t.line,t.ch+4)},"Shift-Ctrl-Alt-I":"image","Shift-Ctrl-L":"link","Shift-Ctrl-O":"list-ol","Shift-Ctrl-P":"preformatted-text","Shift-Ctrl-T":"table","Shift-Alt-P":"pagebreak",F9:"watch",F10:"preview",F11:"fullscreen"},w.trim=u=function(e){return String.prototype.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},w.ucwords=w.wordsFirstUpperCase=function(e){return e.toLowerCase().replace(/\b(\w)|\s(\w)/g,function(e){return e.toUpperCase()})},w.firstUpperCase=w.ucfirst=function(e){return e.toLowerCase().replace(/\b(\w)/,function(e){return e.toUpperCase()})},w.urls={atLinkBase:"https://github.com/"},w.regexs={atLink:/@(\w+)/g,email:/(\w+)@(\w+)\.(\w+)\.?(\w+)?/g,emailLink:/(mailto:)?([\w\.\_]+)@(\w+)\.(\w+)\.?(\w+)?/g,emoji:/:([\w\+-]+):/g,emojiDatetime:/(\d{2}:\d{2}:\d{2})/g,twemoji:/:(tw-([\w]+)-?(\w+)?):/g,fontAwesome:/:(fa-([\w]+)(-(\w+)){0,}):/g,editormdLogo:/:(editormd-logo-?(\w+)?):/g,pageBreak:/^\[[=]{8,}\]$/},w.emoji={path:"http://www.emoji-cheat-sheet.com/graphics/emojis/",ext:".png"},w.twemoji={path:"http://twemoji.maxcdn.com/36x36/",ext:".png"},w.markedRenderer=function(h,e){var a=y.extend({toc:!0,tocm:!1,tocStartLevel:1,pageBreak:!0,atLink:!0,emailLink:!0,taskList:!1,emoji:!1,tex:!1,flowChart:!1,sequenceDiagram:!1},e||{}),n=w.$marked,e=new n.Renderer,t=(h=h||[],w.regexs),r=t.atLink,o=t.emoji,i=t.email,s=t.emailLink,m=t.twemoji,g=t.fontAwesome,v=t.editormdLogo,l=t.pageBreak;return e.emoji=function(e){var t=(e=e.replace(w.regexs.emojiDatetime,function(e){return e.replace(/:/g,"&#58;")})).match(o);if(t&&a.emoji)for(var i=0,n=t.length;i<n;i++)":+1:"===t[i]&&(t[i]=":\\+1:"),e=e.replace(new RegExp(t[i]),function(e,t){var i=e.match(g),n=e.replace(/:/g,"");if(i)for(var r=0,o=i.length;r<o;r++){var a=i[r].replace(/:/g,"");return'<i class="fa '+a+' fa-emoji" title="'+a.replace("fa-","")+'"></i>'}else{var s=e.match(v),l=e.match(m);if(s)for(var c=0,h=s.length;c<h;c++){var u=s[c].replace(/:/g,"");return'<i class="'+u+'" title="Editor.md logo ('+u+')"></i>'}else{if(!l)return'<img src="'+w.emoji.path+(e="moon"===(e="black_large_square"===(e="+1"===n?"plus1":n)?"black_square":e)?"waxing_gibbous_moon":e)+w.emoji.ext+'" class="emoji" title="&#58;'+n+'&#58;" alt="&#58;'+n+'&#58;" />';for(var d=0,f=l.length;d<f;d++){var p=l[d].replace(/:/g,"").replace("tw-","");return'<img src="'+w.twemoji.path+p+w.twemoji.ext+'" title="twemoji-'+p+'" alt="twemoji-'+p+'" class="emoji twemoji" />'}}}});return e},e.atLink=function(e){return e=r.test(e)&&(a.atLink&&(e=(e=e.replace(i,function(e,t,i,n){return e.replace(/@/g,"_#_&#64;_#_")})).replace(r,function(e,t){return'<a href="'+w.urls.atLinkBase+t+'" title="&#64;'+t+'" class="at-link">'+e+"</a>"}).replace(/_#_&#64;_#_/g,"@")),a.emailLink)?e.replace(s,function(e,t,i,n,r){return!t&&y.inArray(r,"jpg|jpeg|png|gif|webp|ico|icon|pdf".split("|"))<0?'<a href="mailto:'+e+'">'+e+"</a>":e}):e},e.link=function(e,t,i){if(this.options.sanitize){try{var n=decodeURIComponent(unescape(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===n.indexOf("javascript:"))return""}n='<a href="'+e+'"';return r.test(t)||r.test(i)?(t&&(n+=' title="'+t.replace(/@/g,"&#64;")),n+'">'+i.replace(/@/g,"&#64;")+"</a>"):(t&&(n+=' title="'+t+'"'),n+">"+i+"</a>")},e.heading=function(e,t,i){var n=e,r=/\s*\<a\s*href\=\"(.*)\"\s*([^\>]*)\>(.*)\<\/a\>\s*/;if(r.test(e)){for(var o=[],a=0,s=(e=e.split(/\<a\s*([^\>]+)\>([^\>]*)\<\/a\>/)).length;a<s;a++)o.push(e[a].replace(/\s*href\=\"(.*)\"\s*/g,""));e=o.join(" ")}var l=(e=u(e)).toLowerCase().replace(/[^\w]+/g,"-"),l={text:e,level:t,slug:l},c=/^[\u4e00-\u9fa5]+$/.test(e)?escape(e).replace(/\%/g,""):e.toLowerCase().replace(/[^\w]+/g,"-"),l=(h.push(l),"<h"+t+' id="h'+t+"-"+this.options.headerPrefix+c+'">');return(l=(l=l+('<a name="'+e+'" class="reference-link"></a>')+'<span class="header-link octicon octicon-link"></span>')+this.atLink(r?this.emoji(n):this.emoji(e)))+"</h"+t+">"},e.pageBreak=function(e){return e=l.test(e)&&a.pageBreak?'<hr style="page-break-after:always;" class="page-break editormd-page-break" />':e},e.paragraph=function(e){var t=/\$\$(.*)\$\$/g.test(e),i=/^\$\$(.*)\$\$$/.test(e),n=i?' class="'+w.classNames.tex+'"':"",r=(a.tocm?/^(\[TOC\]|\[TOCM\])$/:/^\[TOC\]$/).test(e),o=/^\[TOCM\]$/.test(e),t='<div class="markdown-toc editormd-markdown-toc">'+(e=!i&&t?e.replace(/(\$\$([^\$]*)\$\$)+/g,function(e,t){return'<span class="'+w.classNames.tex+'">'+t.replace(/\$/g,"")+"</span>"}):i?e.replace(/\$/g,""):e)+"</div>";return r?o?'<div class="editormd-toc-menu">'+t+"</div><br/>":t:l.test(e)?this.pageBreak(e):"<p"+n+">"+this.atLink(this.emoji(e))+"</p>\n"},e.code=function(e,t,i){return"seq"===t||"sequence"===t?'<div class="sequence-diagram">'+e+"</div>":"flow"===t?'<div class="flowchart">'+e+"</div>":"math"===t||"latex"===t||"katex"===t?'<p class="'+w.classNames.tex+'">'+e+"</p>":n.Renderer.prototype.code.apply(this,arguments)},e.tablecell=function(e,t){var i=t.header?"th":"td";return(t.align?"<"+i+' style="text-align:'+t.align+'">':"<"+i+">")+this.atLink(this.emoji(e))+"</"+i+">\n"},e.listitem=function(e){return a.taskList&&/^\s*\[[x\s]\]\s*/.test(e)?(e=e.replace(/^\s*\[\s\]\s*/,'<input type="checkbox" class="task-list-item-checkbox" /> ').replace(/^\s*\[x\]\s*/,'<input type="checkbox" class="task-list-item-checkbox" checked disabled /> '),'<li style="list-style: none;">'+this.atLink(this.emoji(e))+"</li>"):"<li>"+this.atLink(this.emoji(e))+"</li>"},e},w.markdownToCRenderer=function(e,t,i,n){var r="",o=0,a=this.classPrefix;n=n||1;for(var s=0,l=e.length;s<l;s++){var c=e[s].text,h=e[s].level;h<n||(r=r+(o<h?"":h<o?new Array(o-h+2).join("</ul></li>"):"</ul></li>")+('<li><a class="toc-level-'+h+'" href="#'+c+'" level="'+h+'">'+c+"</a><ul>"),o=h)}var u,d=t.find(".markdown-toc");return d.length<1&&"false"===t.attr("previewContainer")&&(u='<div class="markdown-toc '+a+'markdown-toc"></div>',t.html(u=i?'<div class="'+a+'toc-menu">'+u+"</div>":u),d=t.find(".markdown-toc")),i&&d.wrap('<div class="'+a+'toc-menu"></div><br/>'),d.html('<ul class="markdown-toc-list"></ul>').children(".markdown-toc-list").html(r.replace(/\r?\n?\<ul\>\<\/ul\>/g,"")),d},w.tocDropdownMenu=function(e,a){a=a||"Table of Contents";var s=400,e=e.find("."+this.classPrefix+"toc-menu");return e.each(function(){var e=y(this),t=e.children(".markdown-toc"),n='<i class="fa fa-angle-down"></i>',i='<a href="javascript:;" class="toc-menu-btn">'+n+a+"</a>",r=t.children("ul"),o=r.find("li");t.append(i),o.first().before("<li><h1>"+a+" "+n+"</h1></li>"),e.mouseover(function(){r.show(),o.each(function(){var e,t=y(this),i=t.children("ul");""===i.html()&&i.remove(),0<i.length&&""!==i.html()&&(e=t.children("a").first()).children(".fa").length<1&&e.append(y(n).css({float:"right",paddingTop:"4px"})),t.mouseover(function(){i.css("z-index",s).show(),s+=1}).mouseleave(function(){i.hide()})})}).mouseleave(function(){r.hide()})}),e},w.filterHTMLTags=function(e,t){if("string"!=typeof e&&(e=new String(e)),"string"==typeof t){for(var t=t.split("|"),i=t[0].split(","),a=t[1],n=0,r=i.length;n<r;n++){var o=i[n];e=e.replace(new RegExp("<s*"+o+"s*([^>]*)>([^>]*)<s*/"+o+"s*>","igm"),"")}void 0!==a&&(t=/\<(\w+)\s*([^\>]*)\>([^\>]*)\<\/(\w+)\>/gi,e="*"===a?e.replace(t,function(e,t,i,n,r){return"<"+t+">"+n+"</"+r+">"}):"on*"===a?e.replace(t,function(e,t,i,n,r){var t=y("<"+t+">"+n+"</"+r+">"),n=y(e)[0].attributes,o={},r=(y.each(n,function(e,t){'"'!==t.nodeName&&(o[t.nodeName]=t.nodeValue)}),y.each(o,function(e){0===e.indexOf("on")&&delete o[e]}),t.attr(o),void 0!==t[1]?y(t[1]).text():"");return t[0].outerHTML+r}):e.replace(t,function(e,t,i,n){var r=a.split(","),o=y(e);return o.html(n),y.each(r,function(e){o.attr(r[e],null)}),o[0].outerHTML}))}return e},w.markdownToHTML=function(e,t){w.$marked=marked;var i,n=y("#"+e),e=n.settings=y.extend(!0,{gfm:!0,toc:!0,tocm:!1,tocStartLevel:1,tocTitle:"目录",tocDropdown:!1,tocContainer:"",markdown:"",markdownSourceCode:!1,htmlDecode:!1,autoLoadKaTeX:!0,pageBreak:!0,atLink:!0,emailLink:!0,tex:!1,taskList:!1,emoji:!1,flowChart:!1,sequenceDiagram:!1,previewCodeHighlight:!0},t||{}),r=n.find("textarea"),t=(r.length<1&&(n.append("<textarea></textarea>"),r=n.find("textarea")),""===e.markdown?r.val():e.markdown),o=[],a={toc:e.toc,tocm:e.tocm,tocStartLevel:e.tocStartLevel,taskList:e.taskList,emoji:e.emoji,tex:e.tex,pageBreak:e.pageBreak,atLink:e.atLink,emailLink:e.emailLink,flowChart:e.flowChart,sequenceDiagram:e.sequenceDiagram,previewCodeHighlight:e.previewCodeHighlight},a={renderer:w.markedRenderer(o,a),gfm:e.gfm,tables:!0,breaks:!0,pedantic:!1,sanitize:!e.htmlDecode,smartLists:!0,smartypants:!0},t=new String(t),a=marked(t,a),a=w.filterHTMLTags(a,e.htmlDecode),t=(e.markdownSourceCode?r.text(t):r.remove(),n.addClass("markdown-body "+this.classPrefix+"html-preview").append(a),""!==e.tocContainer?y(e.tocContainer):n);return""!==e.tocContainer&&t.attr("previewContainer",!1),e.toc&&(n.tocContainer=this.markdownToCRenderer(o,t,e.tocDropdown,e.tocStartLevel),(e.tocDropdown||0<n.find("."+this.classPrefix+"toc-menu").length)&&this.tocDropdownMenu(n,e.tocTitle),""!==e.tocContainer)&&n.find(".editormd-toc-menu, .editormd-markdown-toc").remove(),e.previewCodeHighlight&&(n.find("pre").addClass("prettyprint linenums"),prettyPrint()),w.isIE8||(e.flowChart&&n.find(".flowchart").flowChart(),e.sequenceDiagram&&n.find(".sequence-diagram").sequenceDiagram({theme:"simple"})),e.tex&&(i=function(){n.find("."+w.classNames.tex).each(function(){var e=y(this);katex.render(e.html().replace(/&lt;/g,"<").replace(/&gt;/g,">"),e[0]),e.find(".katex").css("font-size","1.6em")})},!e.autoLoadKaTeX||w.$katex||w.kaTeXLoaded?i():this.loadKaTeX(function(){w.$katex=katex,w.kaTeXLoaded=!0,i()})),n.getMarkdown=function(){return r.val()},n},w.themes=["default","dark"],w.previewThemes=["default","dark"],w.editorThemes=["default","3024-day","3024-night","ambiance","ambiance-mobile","base16-dark","base16-light","blackboard","cobalt","eclipse","elegant","erlang-dark","lesser-dark","mbo","mdn-like","midnight","monokai","neat","neo","night","paraiso-dark","paraiso-light","pastel-on-dark","rubyblue","solarized","the-matrix","tomorrow-night-eighties","twilight","vibrant-ink","xq-dark","xq-light"],w.loadPlugins={},w.loadFiles={js:[],css:[],plugin:[]},w.loadPlugin=function(e,t,i){t=t||function(){},this.loadScript(e,function(){w.loadFiles.plugin.push(e),t()},i)},w.loadCSS=function(e,t,i){i=i||"head",t=t||function(){};var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.onload=n.onreadystatechange=function(){w.loadFiles.css.push(e),t()},n.href=e+".css",("head"===i?document.getElementsByTagName("head")[0]:document.body).appendChild(n)},w.isIE="Microsoft Internet Explorer"==navigator.appName,w.isIE8=w.isIE&&"8."==navigator.appVersion.match(/8./i),w.loadScript=function(e,t,i){i=i||"head",t=t||function(){};var n=null;(n=document.createElement("script")).id=e.replace(/[\./]+/g,"-"),n.type="text/javascript",n.src=e+".js",w.isIE8?n.onreadystatechange=function(){!n.readyState||"loaded"!==n.readyState&&"complete"!==n.readyState||(n.onreadystatechange=null,w.loadFiles.js.push(e),t())}:n.onload=function(){w.loadFiles.js.push(e),t()},("head"===i?document.getElementsByTagName("head")[0]:document.body).appendChild(n)},w.katexURL={css:"//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min",js:"//cdnjs.cloudflare.com/ajax/libs/KaTeX/0.3.0/katex.min"},w.kaTeXLoaded=!1,w.loadKaTeX=function(e){w.loadCSS(w.katexURL.css,function(){w.loadScript(w.katexURL.js,e||function(){})})},w.lockScreen=function(e){y("html,body").css("overflow",e?"hidden":"")},w.createDialog=function(t){function e(){f.css({top:(y(window).height()-f.height())/2+"px",left:(y(window).width()-f.width())/2+"px"})}t=y.extend(!0,{name:"",width:420,height:240,title:"",drag:!0,closed:!0,content:"",mask:!0,maskStyle:{backgroundColor:"#fff",opacity:.1},lockScreen:!0,footer:!0,buttons:!1},t);var o,a,i,s,n,r=this,l=this.editor,c=w.classPrefix,h=(new Date).getTime(),h=""===t.name?c+"dialog-"+h:t.name,u=w.mouseOrTouch,d='<div class="'+c+"dialog "+h+'">',f=(""!==t.title&&(d=(d+='<div class="'+c+'dialog-header"'+(t.drag?' style="cursor: move;"':"")+">")+('<strong class="'+c+'dialog-title">'+t.title+"</strong>")+"</div>"),t.closed&&(d+='<a href="javascript:;" class="fa fa-close '+c+'dialog-close"></a>'),d+='<div class="'+c+'dialog-container">'+t.content,!t.footer&&"string"!=typeof t.footer||(d+='<div class="'+c+'dialog-footer">'+("boolean"==typeof t.footer?"":t.footer)+"</div>"),l.append(d=(d=d+"</div>"+('<div class="'+c+"dialog-mask "+c+'dialog-mask-bg"></div>'))+('<div class="'+c+"dialog-mask "+c+'dialog-mask-con"></div>')+"</div>"),l.find("."+h));f.lockScreen=function(e){return t.lockScreen&&(y("html,body").css("overflow",e?"hidden":""),r.resize()),f},f.showMask=function(){return t.mask&&l.find("."+c+"mask").css(t.maskStyle).css("z-index",w.dialogZindex-1).show(),f},f.hideMask=function(){return t.mask&&l.find("."+c+"mask").hide(),f},f.loading=function(e){return f.find("."+c+"dialog-mask")[e?"show":"hide"](),f},f.lockScreen(!0).showMask(),f.show().css({zIndex:w.dialogZindex,border:w.isIE8?"1px solid #ddd":"",width:"number"==typeof t.width?t.width+"px":t.width,height:"number"==typeof t.height?t.height+"px":t.height});if(e(),y(window).resize(e),f.children("."+c+"dialog-close").bind(u("click","touchend"),function(){f.hide().lockScreen(!1).hideMask()}),"object"==typeof t.buttons){var p,m=f.footer=f.find("."+c+"dialog-footer");for(p in t.buttons){var g=t.buttons[p],v=c+p+"-btn";m.append('<button class="'+c+"btn "+v+'">'+g[0]+"</button>"),g[1]=y.proxy(g[1],f),m.children("."+v).bind(u("click","touchend"),g[1])}}return""!==t.title&&t.drag&&(d=f.children("."+c+"dialog-header"),t.mask||d.bind(u("click","touchend"),function(){w.dialogZindex+=2,f.css("z-index",w.dialogZindex)}),d.mousedown(function(e){e=e||window.event,o=e.clientX-parseInt(f[0].style.left),a=e.clientY-parseInt(f[0].style.top),document.onmousemove=n}),i=function(e){e.removeClass(c+"user-unselect").off("selectstart")},s=function(e){e.addClass(c+"user-unselect").on("selectstart",function(e){return!1})},n=function(e){e=e||window.event;var t,i,n=parseInt(f[0].style.left),r=parseInt(f[0].style.top);0<=n?n+f.width()<=y(window).width()?t=e.clientX-o:(t=y(window).width()-f.width(),document.onmousemove=null):(t=0,document.onmousemove=null),0<=r?i=e.clientY-a:(i=0,document.onmousemove=null),document.onselectstart=function(){return!1},s(y("body")),s(f),f[0].style.left=t+"px",f[0].style.top=i+"px"},document.onmouseup=function(){i(y("body")),i(f),document.onselectstart=null,document.onmousemove=null},d.touchDraggable=function(){var i=null;this.bind("touchstart",function(e){var e=e.originalEvent,t=y(this).parent().position();i={x:e.changedTouches[0].pageX-t.left,y:e.changedTouches[0].pageY-t.top}}).bind("touchmove",function(e){e.preventDefault();e=e.originalEvent;y(this).parent().css({top:e.changedTouches[0].pageY-i.y,left:e.changedTouches[0].pageX-i.x})})},d.touchDraggable()),w.dialogZindex+=2,f},w.mouseOrTouch=function(e,t){t=t||"touchend";e=e||"click";try{document.createEvent("TouchEvent"),e=t}catch(e){}return e},w.dateFormat=function(e){e=e||"";function t(e){return e<10?"0"+e:e}var i=new Date,n=i.getFullYear(),r=n.toString().slice(2,4),o=t(i.getMonth()+1),a=t(i.getDate()),s=i.getDay(),l=t(i.getHours()),c=t(i.getMinutes()),h=t(i.getSeconds()),u=t(i.getMilliseconds()),d="",f=r+"-"+o+"-"+a,p=n+"-"+o+"-"+a,m=l+":"+c+":"+h;switch(e){case"UNIX Time":d=i.getTime();break;case"UTC":d=i.toUTCString();break;case"yy":d=r;break;case"year":case"yyyy":d=n;break;case"month":case"mm":d=o;break;case"cn-week-day":case"cn-wd":d="星期"+["日","一","二","三","四","五","六"][s];break;case"week-day":case"wd":d=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][s];break;case"day":case"dd":d=a;break;case"hour":case"hh":d=l;break;case"min":case"ii":d=c;break;case"second":case"ss":d=h;break;case"ms":d=u;break;case"yy-mm-dd":d=f;break;case"yyyy-mm-dd":d=p;break;case"yyyy-mm-dd h:i:s ms":case"full + ms":d=p+" "+m+" "+u;break;default:d=p+" "+m}return d},w}),!function(){function t(e){var t={name:"en",description:"Open source online Markdown editor.",tocTitle:"Table of Contents",toolbar:{undo:"Undo(Ctrl+Z)",redo:"Redo(Ctrl+Y)",bold:"Bold",del:"Strikethrough",italic:"Italic",quote:"Block quote",ucwords:"Words first letter convert to uppercase",uppercase:"Selection text convert to uppercase",lowercase:"Selection text convert to lowercase",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6","list-ul":"Unordered list","list-ol":"Ordered list",hr:"Horizontal rule",link:"Link","reference-link":"Reference link",image:"Image",code:"Code inline","preformatted-text":"Preformatted text / Code block (Tab indent)","code-block":"Code block (Multi-languages)",table:"Tables",datetime:"Datetime",emoji:"Emoji","html-entities":"HTML Entities",pagebreak:"Page break",watch:"Unwatch",unwatch:"Watch",preview:"HTML Preview (Press Shift + ESC exit)",fullscreen:"Fullscreen (Press ESC exit)",clear:"Clear",search:"Search",help:"Help",info:"About "+e.title},buttons:{enter:"Enter",cancel:"Cancel",close:"Close"},dialog:{link:{title:"Link",url:"Address",urlTitle:"Title",urlEmpty:"Error: Please fill in the link address."},referenceLink:{title:"Reference link",name:"Name",url:"Address",urlId:"ID",urlTitle:"Title",nameEmpty:"Error: Reference name can't be empty.",idEmpty:"Error: Please fill in reference link id.",urlEmpty:"Error: Please fill in reference link url address."},image:{title:"Image",url:"Address",link:"Link",alt:"Title",uploadButton:"Upload",imageURLEmpty:"Error: picture url address can't be empty.",uploadFileEmpty:"Error: upload pictures cannot be empty!",formatNotAllowed:"Error: only allows to upload pictures file, upload allowed image file format:"},preformattedText:{title:"Preformatted text / Codes",emptyAlert:"Error: Please fill in the Preformatted text or content of the codes."},codeBlock:{title:"Code block",selectLabel:"Languages: ",selectDefaultText:"select a code language...",otherLanguage:"Other languages",unselectedLanguageAlert:"Error: Please select the code language.",codeEmptyAlert:"Error: Please fill in the code content."},htmlEntities:{title:"HTML Entities"},help:{title:"Help"}}};e.defaults.lang=t}"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?module.exports=t:"function"==typeof define?define.amd?define(["editormd"],function(e){t(e)}):define(function(e){e=e("../editormd");t(e)}):t(window.editormd)}(),window.initEditorMd=async(i,n,r)=>{$(function(){var e={markdown:r.value,path:"_content/Moka.Editor.Md/lib/editor.md/",theme:r.theme,syncScrolling:r.syncScrolling,saveHTMLToTextarea:r.saveHtmlToTextarea,height:r.height,readOnly:r.isReadOnly,language:"en"};const t=editormd(i,e);r.isPreviewActive&&t.previewing(),r.isFullScreen&&t.fullscreen(),t.on("change",function(){var e=t.getMarkdown();n.invokeMethodAsync("UpdateContentAsync",e)}),t.on("fullscreen",function(e){n.invokeMethodAsync("ToggleFullScreenAsync",e)})})};